<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ newsletter.title }}</title>
</head>
<body style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;line-height: 1.6;color: #333;max-width: 800px;margin: 0 auto;padding: 20px;background-color: #f9f9f9;">
    <div class="container" style="border-radius: 8px;box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);padding: 30px 30px 30px 30px;">
        <!-- Header -->
        <div class="header" style="text-align: center;padding-bottom: 20px;border-bottom: 2px solid #e7f3f1;margin-bottom: 25px;">
            <div class="logo" style="text-align: center;margin-bottom: -60px;">
                <img src="{{ branding.logo_url }}" alt="{{ branding.logo_alt }}" style="max-width: 200px;height: auto;margin: 0 auto;display: block;">
            </div>
            <h1>{{ newsletter.title }}</h1>

            <div class="greeting" style="font-style: italic;color: #555;margin-bottom: 25px;">{{ newsletter.greeting }}</div>
            <div class="greeting" style="font-style: italic;color: #555;margin-bottom: 25px;">{{ newsletter.unsubscribe_text }} <a href="{{ newsletter.unsubscribe_link }}">unsubscribe</a> if you don't feel this is relevant.</div>
        </div>

        <!-- Highlights Section -->
        <div class="section" style="margin-bottom: 30px;">
            <div class="highlights" style="background-color: #e7f3f1;border-radius: 8px;padding: 15px 20px;margin-bottom: 25px;">
                <h2 style="color: #1a7b6e;border-bottom: 1px solid #168369;padding-bottom: 8px;margin-top: 25px;display: flex;align-items: center;">
                    <img width="32" height="32" src="{{ highlights.icon }}" alt="Highlight icon" style="width: 32px;height: 32px;margin-right: 10px;">
                    {{ highlights.title }}
                </h2>
                <ul style="list-style-type: none;padding-left: 0;">
                    {% for item in highlights.highlights_list %}
                    <li style="padding: 8px 0;position: relative;padding-left: 28px;">{{ item | markdown }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Dynamic Sections -->
        {% for section in sections %}
        <div class="section" style="margin-bottom: 30px;">
            <h2 style="color: #1a7b6e;border-bottom: 1px solid #168369;padding-bottom: 8px;margin-top: 25px;display: flex;align-items: center;">
                {% if section.icon %}
                <img width="32" height="32" src="{{ section.icon }}" alt="{{ section.title }} icon" style="width: 32px;height: 32px;margin-right: 10px;">
                {% endif %}
                {{ section.title }}
            </h2>

            {% if section.description and section.type != 'feedback' %}
            <p>{{ section.description }}</p>
            {% endif %}

            <!-- Platform Cards -->
            {% if section.type == 'platforms' %}
                {% for platform in section.platforms %}
                <div class="platform-card" style="background: linear-gradient(135deg, #e7f3f1 0%, #d6ebf2 100%);border-radius: 8px;padding: 15px;margin-bottom: 15px;display: flex;align-items: center;">
                    <div class="platform-icon" style="background-color: transparent;width: 40px;height: 40px;display: flex;align-items: center;justify-content: center;margin-right: 15px;">
                        <img width="32" height="32" src="{{ platform.icon }}" alt="{{ platform.name }} platform icon" style="width: 32px;height: 32px;">
                    </div>
                    <div class="platform-details" style="flex: 1;">
                        <div class="platform-name" style="font-weight: bold;color: #1a7b6e;margin-bottom: 5px;">{{ platform.name }}</div>
                        <a href="{{ platform.link }}" style="color: #3d91c5;text-decoration: none;">{{ platform.link_text }}</a>
                    </div>
                </div>
                {% endfor %}

                {% for footer_text in section.footer_text %}
                <p>{{ footer_text }}</p>
                {% endfor %}
            {% endif %}

            <!-- Feature Grid -->
            {% if section.type == 'features' %}
            <div class="feature-grid" style="display: grid;grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));gap: 30px;margin: 20px 0;">
                {% for feature in section.features %}
                <div class="feature-card" style="background-color: #f0f7fa;border-left: 4px solid #3d91c5;padding: 15px;border-radius: 4px;">
                    <div class="feature-title" style="font-weight: bold;color: #3d91c5;margin-bottom: 8px;">{{ feature.title }}</div>
                    <p>{{ feature.description }}</p>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Content Section -->
            {% if section.type == 'content' %}
                {% for paragraph in section.paragraphs %}
                <p>{{ paragraph | markdown }}</p>
                {% endfor %}

                {% if section.technical_list %}
                <div class="technical-list" style="background-color: #f0f7fa;border-radius: 8px;padding: 0 0px;">
                    <ul>
                        {% for item in section.technical_list %}
                        <li style="margin-bottom: 12px;position: relative;">{{ item | markdown }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            {% endif %}

            <!-- Contributors Section -->
            {% if section.type == 'contributors' %}
                {% for contributor in section.contributors %}
                <div class="contributor" style="background: linear-gradient(135deg, #f0f7fa 0%, #e7f3f1 100%);border-radius: 8px;padding: 15px;margin-bottom: 15px;">
                    <div class="contributor-name" style="font-weight: bold;color: #1a7b6e;margin-bottom: 5px;">{{ contributor.name }}</div>
                    <p>{{ contributor.description }}</p>
                </div>
                {% endfor %}

                {% for thanks in section.additional_thanks %}
                <p>{{ thanks | markdown }}</p>
                {% endfor %}
            {% endif %}

            <!-- Feedback Section -->
            {% if section.type == 'feedback' %}
            <div class="feedback-section" style="background-color: #e7f3f1;border-radius: 8px;padding: 20px;margin: 25px 0;">
                <p>{{ section.description }}</p>

                <p>{{ section.contact_intro }}</p>

                {% if section.contribution_opportunities %}
                <div class="contribution-opportunities" style="margin: 20px 0;">
                    {% for opportunity in section.contribution_opportunities %}
                    <div style="margin-bottom: 15px;padding: 12px;background-color: #f0f7fa;border-left: 4px solid #3d91c5;border-radius: 4px;">
                        <div style="font-weight: bold;color: #1a7b6e;margin-bottom: 5px;">{{ opportunity.area | markdown }}</div>
                        <p style="margin: 0;">{{ opportunity.description }}</p>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <div class="contact-methods" style="margin-top: 15px;text-align: center;">
                    {% for method in section.contact_methods %}
                    <div class="contact-item" style="padding: 10px 15px;background-color: #1a7b6e;color: white;border-radius: 4px;margin: 15px auto;display: block;width: fit-content;max-width: 90%;text-align: center;">
                        <a href="{{ method.link }}" style="color: white;text-decoration: none;">{{ method.text }}</a>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <p>{{ section.closing_text }}</p>
            {% endif %}
        </div>
        {% endfor %}

        <!-- Footer -->
        <div class="section" style="margin-bottom: 30px;">
            <p class="signature" style="font-style: italic;margin-top: 20px;text-align: center;">{{ footer.signature_text }}</p>
            <div class="signature-image-container" style="text-align: center;margin-top: 10px;">
                <img class="signature-image" width="32" height="32" src="{{ footer.signature_icon }}" alt="{{ footer.signature_icon_alt }}" style="display: inline-block;vertical-align: middle;width: 32px;height: 32px;">
            </div>

            <div class="footer" style="text-align: center;margin-top: 30px;padding-top: 10px;border-top: 1px solid #777777;color: #777;">
                {{ footer.team_name }}
            </div>
        </div>
    </div>
</body>
</html>